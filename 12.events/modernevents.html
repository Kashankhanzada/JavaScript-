<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
<script type="text/javascript">
function addEventHandler(oNode, evt, oFunc, bCaptures)
{
	if (typeof(window.event) != "undefined")
		oNode.attachEvent("on"+evt, oFunc);
	else
		oNode.addEventListener(evt, oFunc, bCaptures);
}
function getEventTarget(e) {
	if (window.event) return window.event.srcElement;
	else return e.target;
}

function div1Handler(evt) {
	var e = evt || window.event;
	var target = getEventTarget(e);
	var str = "Event handler for div1, target: " + target.getAttribute('id') + " , type: " + e.type;
	if (e.eventPhase) str+=" ; phase: " + e.eventPhase;
	alert(str);
	if (e.cancelBubble != null) e.cancelBubble=true;
	else e.stopPropagation();
}
function div2Handler(evt) {
	var e = evt || window.event;
	var target = getEventTarget(e);
	var str = "Event handler for div2, target: " + target.getAttribute('id') + " , type: " + e.type;
	if (e.eventPhase) str+=" ; phase: " + e.eventPhase;
	alert(str);
}
function div3Handler(evt) {
	var e = evt || window.event;
	var target = getEventTarget(e);
	var str = "Event handler for div3, target: " + target.getAttribute('id') + " , type: " + e.type;
	if (e.eventPhase) str+=" ; phase: " + e.eventPhase;
	alert(str);
	
}
function bodyHandler(evt) {
	var e = evt || window.event;
	var target = getEventTarget(e);
	var str = "Event handler for body, target: " + target.getAttribute('id') + " , type: " + e.type;
	if (e.eventPhase) str+=" ; phase: " + e.eventPhase;
	alert(str);
}

function initializeHandlers() {
	addEventHandler(document.getElementsByTagName("body")[0],"click",bodyHandler,true);
	addEventHandler(document.getElementById("div1"),"click",div1Handler,true);
	addEventHandler(document.getElementById("div2"),"click",div2Handler,true);
	addEventHandler(document.getElementById("div3"),"click",div3Handler,true);
	if (!window.event) {
		addEventHandler(document.getElementsByTagName("body")[0],"click",bodyHandler,false);
		addEventHandler(document.getElementById("div1"),"click",div1Handler,false);
		addEventHandler(document.getElementById("div2"),"click",div2Handler,false);
		addEventHandler(document.getElementById("div3"),"click",div3Handler,false);
	}
}

addEventHandler(window, "load", function(evt) { initializeHandlers() } );
</script>
</head>

<body>

<h1>Using the Modern Event Model</h1>
<div id="div1" style="border:1px solid #000000;padding:10pt;background:cornsilk">
	<p>This is div 1</p>
	<div id="div2" style="border:1px solid #000000;padding:10pt;background:gray">
		<p>This is div 2</p>	
		<div id="div3" style="border:1px solid #000000;padding:10pt; background:lightBlue">
			<p>This is div 3</p>
		</div>
	</div>
</div>


</body>

</html>
